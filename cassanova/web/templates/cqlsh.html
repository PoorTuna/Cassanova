{% extends "base.html" %}

{% block title %}{{ cluster_name }} - CQL DevTools{% endblock %}

{% block body_class %}cql-devtools with-sidebar{% endblock %}

{% block head_extra %}
<script src="/static/scripts/vendor/monaco/loader.js" defer></script>
<script src="/static/scripts/app/cqlsh.js" defer></script>
<script>
    const clusterName = "{{ cluster_config_entry }}";
</script>
{% endblock %}

{% block content %}
<main id="container">
    <div id="editor" class="editor-panel">
        <div id="monaco-editor" class="monaco-editor"></div>
        <div class="run-query-row">
            <button id="run-btn" class="btn">Run Query</button>
            <label class="tracing-label">
                <input type="checkbox" id="enable-tracing"/>
                Enable Tracing
            </label>
            <select id="consistency-level" name="consistency_level">
                {% for level in ["ANY", "ONE", "TWO", "THREE", "QUORUM", "ALL", "LOCAL_QUORUM", "EACH_QUORUM", "SERIAL", "LOCAL_SERIAL", "LOCAL_ONE"] %}
                <option value="{{ level }}" {% if level == "QUORUM" %}selected{% endif %}>{{ level }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div id="resizer" class="resizer" aria-label="Resize editor panel" role="separator" tabindex="0"></div>
    <div id="result" class="result-panel">
        <div id="query-result"><em>Results will appear here...</em></div>
        <div class="result-toolbar">
            <button id="export-btn" class="btn">Export Result</button>
            <button id="clear-history-btn" class="btn">Clear History</button>
            <button id="toggle-history-btn" class="btn">Show History</button>
        </div>
    </div>
</main>
<div id="history-drawer">
    <div class="drawer-header">
        <h2>Query History</h2>
        <button id="close-history-btn" class="close-btn" title="Close History">Ã—</button>
    </div>
    <ul id="history-list"></ul>
</div>
{% endblock %}
